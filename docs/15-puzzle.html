<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>15-puzzle</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.5.0/d3.js"></script>
    <script src="15-puzzle.js"></script>
    <script src="database.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/idb@3.0.2/build/idb.min.js"></script>
    <link rel="stylesheet" href="15-puzzle.css">
    <link rel="stylesheet" href="modal_box.css">
</head>
<body>
    <div id="header">
        <div style="height: 100%">
            <a href="index.html">
                <img src="images/icon-15-puzzle.png" style="height: 100%" alt="15-puzzle" title="To the main page">
            </a>
        </div>
        <div id="header_tabs">
            <button type="button" id="open_about_button" class="open_modal">
                About
            </button>
            <button type="button" id="open_achievements_button" class="open_modal">
                Achievements
            </button>
            <button type="button" id="open_statistics_button" class="open_modal">
                Statistics
            </button>
        </div>
    </div>
    <div id="game_body">
        <svg id="field" width="500" height="500" xmlns="http://www.w3.org/2000/svg">
        </svg>
        <div id="results">
            <span>Current result: <span id="current_result">0</span></span>
            <br>
            <br>
            <span>Best result: <span id="best_result">inf</span></span>
            <br>
            <br>
            <span>Current time: <span id="stopwatch">00:00:00</span></span>
            <br>
            <br>
            <span>Best time: <span id="best_time">inf</span></span>
            <div id="new_game">
                <button id="new_game_button" type="button" name="start_new_game" onclick="generatingField()">Start new game</button>
            </div>
        </div>
    </div>
    <div id="table_results">
        <span style="font: bold 30px sans-serif; margin: auto; display:table; margin-top: 10px"><U> Results </U></span>

        <div class="tab">
            <button id="tab_local" class="tablinks" onclick="onTabClick('local')">Local results</button>
            <button id="tab_global" class="tablinks" onclick="onTabClick('global')">Global results</button>
        </div>

        <div class="container">
            <table id="table_id_global" class="tabcontent">
                <caption>All best results</caption>
                <tr>
                    <th>Place</th>
                    <th class="sort" onclick="getResults('global', 'score')">Result</th>
                    <th class="sort" onclick="getResults('global', 'time')">Time</th>
                </tr>
            </table>
        </div>

        <div class="container">
            <table id="table_id_local" class="tabcontent">
                <caption>Your best result</caption>
                <tr>
                    <th>Place</th>
                    <th class="sort" onclick="getResults('local', 'score')">Result</th>
                    <th class="sort" onclick="getResults('local', 'time')">Time</th>
                </tr>
            </table>
        </div>

        <button type="button" onclick="refreshResults()">
            <img src="images/icons8-refresh-16.png" style="vertical-align: middle" alt=""> Refresh
        </button>
    </div>
    <div id="my_modal" class="modal">
        <div class="modal_content">
            <div id="modal_header" class="modal_header">
                <span class="close">&times;</span>
                <h2>Modal header</h2>
            </div>
            <div id="modal_body" class="modal_body">
                <p>Some text in the Modal Body</p>
                <p>Some other text...</p>
            </div>
        </div>
    </div>
</body>
<script>
    checkVersion("v0.24");
    setUpModals();
    initDB();
    document.getElementById("tab_local").click();
    generatingField();
    initWindow();
</script>
</html>